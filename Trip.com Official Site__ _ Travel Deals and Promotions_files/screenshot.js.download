!function(e){"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function c(e){n(i,o,a,c,u,"next",e)}function u(e){n(i,o,a,c,u,"throw",e)}c(void 0)}))}}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,d=Object.create(c.prototype);return u(d,"_invoke",function(n,r,o){var a,c,u,l=0,d=o||[],f=!1,s={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,c=0,u=e,s.n=n,i}};function m(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<d.length;t++){var o,a=d[t],m=s.p,g=a[2];n>3?(o=g===r)&&(c=a[4]||3,u=a[5]===e?a[3]:a[5],a[4]=3,a[5]=e):a[0]<=m&&((o=n<2&&m<a[1])?(c=0,s.v=r,s.n=a[1]):m<g&&(o=n<3||a[0]>r||r>g)&&(a[4]=n,a[5]=r,s.n=g,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,d,g){if(l>1)throw TypeError("Generator is already running");for(f&&1===d&&m(d,g),c=d,u=g;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(s.n=-1),m(c,u)):s.n=u:s.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=s.n<0)?u:n.call(r,s))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),d}var i={};function l(){}function d(){}function f(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(u(t={},r,(function(){return this})),t),m=f.prototype=l.prototype=Object.create(s);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return d.prototype=f,u(m,"constructor",f),u(f,"constructor",d),d.displayName="GeneratorFunction",u(f,o,"GeneratorFunction"),u(m),u(m,o,"Generator"),u(m,r,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),(c=function(){return{w:a,m:g}})()}function u(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}u=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{function a(t,n){u(e,t,(function(e){return this._invoke(t,n,e)}))}a("next",0),a("throw",1),a("return",2)}},u(e,t,n,r)}function l(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var f;("undefined"!=typeof window?null===(f=window.navigator)||void 0===f?void 0:f.userAgent:"").includes("Chrome");var s,m=function(e){return 1===e.nodeType},g=function(e){return 8===e.nodeType},p=function(e){return m(e)&&void 0!==e.style},y=function(e){return"object"===d(e.className)},v=function(e){return"image"===e.tagName},h=function(e){return"IMG"===e.tagName},w=function(e){return"VIDEO"===e.tagName},b=(s=0,function(){return s+=1,"u".concat("0000".concat((Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4)).concat(s)});function S(e){var t;return null!==(t=e&&m(e)?null==e?void 0:e.ownerDocument:e)&&void 0!==t?t:window.document}function N(e){var t=(new XMLSerializer).serializeToString(e);return t=t.replace(/[\0-\x08\x0B\f\x0E-\x1F\uD800-\uDFFF\uFFFE\uFFFF]/g,""),"data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(t))}function _(e,t){var n=S(t).createElement("img");return n.decoding="sync",n.loading="eager",n.src=e,n}var E="[webcore-screenshot]",O=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).warn.apply(e,[E].concat(n))};function P(e){return{time:function(t){return e&&console.time("".concat(E," ").concat(t))},timeEnd:function(t){return e&&console.timeEnd("".concat(E," ").concat(t))},warn:function(){return e&&O.apply(void 0,arguments)}}}var T=function(e){var t=e.data||{};!function(e){e.pureUrl="".concat(location.protocol,"//").concat(location.host).concat(location.pathname),e.captainAppId=(window.__CORE_SDK__||{}).AppID||"",e.fromSDK=!0,e.version="2.0.66",e.framework=(window.__CORE_SDK__||{}).framework;var t=(window.__NFES_DATA__||window.__NEXT_DATA__||{}).assetPrefix;"string"==typeof t&&(e.nfesResVersion=t.split("/").pop())}(t),function(e,t,n){try{window.UBT_API||(window.UBT_API=[]),window.UBT_API.push({type:"send",data:{type:e,key:t,data:n||{}}})}catch(e){}}("metric",e.key,{tag:t,value:1})},A=function(e){var t=e.module,n=e.category,r=e.error;try{T({key:"web_core_error",data:{message:r.message||"",stack:"".concat(r.stack)||"",category:n,module:t}})}catch(e){console.log(e.message)}};function D(e,t){var n=(t||{}).scale,r=void 0===n?1:n,o=Boolean(null==t?void 0:t.debug),a=e.ownerDocument,c=null==a?void 0:a.defaultView,u=i(i({width:0,height:0,quality:1,type:"image/png",scale:r,timeout:3e4,debug:o},t),{},{__CONTEXT__:!0,log:P(o),node:e,ownerDocument:a,ownerWindow:c,defaultComputedStyles:new Map});if(m(e)){var l=e.getBoundingClientRect();u.width=l.width,u.height=l.height}return u}function j(e,t){var n=t.width,r=t.height,o=t.scale,a=e.createElement("canvas");return a.width=Math.floor(n*o),a.height=Math.floor(r*o),a.style.width="".concat(n,"px"),a.style.height="".concat(r,"px"),a}function C(e,t){try{var n=t.defaultComputedStyles,r=e.nodeName.toLowerCase();/^[a-zA-Z][a-zA-Z0-9-]*$/.test(r)||(r=r.replace(/"/g,""));var o=[r].filter(Boolean).join(":"),a=function(e){var t=e.sandbox;if(!t){var n=e.ownerDocument;try{var r;n&&((t=n.createElement("iframe")).id="__SANDBOX__-".concat(b()),t.width="0",t.height="0",t.style.visibility="hidden",t.style.position="fixed",n.body.appendChild(t),null===(r=t.contentWindow)||void 0===r||r.document.write('<!DOCTYPE html><meta charset="UTF-8"><title></title><body>'),e.sandbox=t)}catch(e){console.log("Failed to getSandBox",e)}}return t}(t),i=null==a?void 0:a.contentWindow,c=null==i?void 0:i.document,u=c.createElement(r),l=u;l.textContent=" ",c.body.appendChild(u);for(var d=i.getComputedStyle(l),f=new Map,s=d.length,m=0;m<s;m++){var g=d.item(m);f.set(g,d.getPropertyValue(g))}return c.body.removeChild(u),n.set(o,f),f}catch(e){return A({module:"screenshot",category:"getDefaultStyle",error:e}),new Map}}function x(e,t,n){try{var r=n.ownerWindow,o=t.style,a=function(e,t){for(var n=new Map,r=[],o=new Map,a=e.length,i=0;i<a;i++){var c=e.item(i),u=e.getPropertyValue(c),l=e.getPropertyPriority(c),d=c.lastIndexOf("-"),f=d>-1?c.substring(0,d):void 0;if(f){var s=o.get(f);s||(s=new Map,o.set(f,s)),s.set(c,[u,l])}(t.get(c)!==u||l)&&(f?r.push(f):n.set(c,[u,l]))}for(var m=r.length,g=0;g<m;g++){var p;null===(p=o.get(r[g]))||void 0===p||p.forEach((function(e,t){return n.set(t,e)}))}return n}(r.getComputedStyle(e),C(e,n));return a.delete("transition-property"),a.delete("all"),a.delete("d"),a.delete("content"),a.delete("margin-top"),a.delete("margin-right"),a.delete("margin-bottom"),a.delete("margin-left"),a.delete("margin-block-start"),a.delete("margin-block-end"),a.delete("margin-inline-start"),a.delete("margin-inline-end"),a.set("box-sizing",["border-box",""]),a.delete("column-data"),a.delete("font-stretch"),a.forEach((function(e,t){var n=l(e,2),r=n[0],a=n[1];o.setProperty(t,r,a)})),a}catch(e){A({module:"screenshot",category:"embedNode",error:e})}}function F(e,t,n){if(!m(t)||"STYLE"!==t.tagName&&!function(e){return"SCRIPT"===e.tagName}(t)){var r=n.log;r.warn("cloned",e.nodeName,t.nodeName);var o=M(t,n);r.warn("childCloned",o),o&&e.appendChild(o)}}function k(e,t,n){try{for(var r,o,a=null!==(r=m(e)?null===(o=e.shadowRoot)||void 0===o?void 0:o.firstChild:void 0)&&void 0!==r?r:e.firstChild;a;a=a.nextSibling)g(a)||(!m(a)||"SLOT"!==a.tagName&&"META"!==a.tagName&&"INPUT"!==a.tagName&&"HTTPS:"!==a.tagName&&'H2"'!==a.tagName&&"BR"!==a.tagName)&&F(t,a,n)}catch(e){A({module:"screenshot",category:"cloneChildNodes",error:e})}}var I=/^[\w-]+$/;function M(e,t){try{var n=t.ownerDocument;if(n&&function(e){return 3===e.nodeType}(e)){var r=e.data.replace(/&nbsp;/g,"");return n.createTextNode(r)}if(m(e)&&(p(e)||y(e))){var o=function(e,t){try{return function(e){return"CANVAS"===e.tagName}(e)?function(e,t){if(e.ownerDocument)try{var n=e.toDataURL();if("data:,"!==n)return _(n,e.ownerDocument)}catch(e){t.log.warn("Failed to clone canvas",e)}var r=e.cloneNode(!1),o=e.getContext("2d"),a=r.getContext("2d");try{return o&&a&&a.putImageData(o.getImageData(0,0,e.width,e.height),0,0),r}catch(e){t.log.warn("Failed to clone canvas",e)}return r}(e,t):function(e){return"IFRAME"===e.tagName}(e)?function(e,t){try{var n;if(null!=e&&null!==(n=e.contentDocument)&&void 0!==n&&n.body)return M(e.contentDocument.body,t)}catch(e){t.log.warn("Failed to clone iframe",e)}return e.cloneNode(!1)}(e,t):h(e)||w(e)||function(e){return y(e)&&"svg"===e.tagName}(e)?null:e.cloneNode(!1)}catch(e){A({module:"screenshot",category:"cloneElement",error:e})}}(e,t);if(o){for(var a=o.getAttributeNames(),i=a.length,c=0;c<i;c++){var u=a[c];o.removeAttribute("data-exposure"),o.removeAttribute("data-bind"),I.test(u)||o.removeAttribute(u)}return x(e,o,t),w(e)||k(e,o,t),o.innerHTML=o.innerHTML.replace(/&nbsp;/g,""),o}return null}var l=e.cloneNode(!1);return l.textContent=l.textContent.replace(/&nbsp;/g,""),k(e,l,t),l}catch(e){A({module:"screenshot",category:"cloneNode",error:e})}}var L=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function B(e,t){try{if(m(e)&&(h(e)||v(e)))return;p(e)&&(n=e.style,L.map((function(e){var t=n.getPropertyValue(e);return t&&"none"!==t?n.setProperty(e,t,n.getPropertyPriority(e)):null})).filter(Boolean)),e.childNodes.forEach((function(e){B(e,t)}))}catch(e){A({module:"screenshot",category:"embedNode",error:e})}var n}function R(e,t){return new Promise((function(n){var o=null!=t?t:{},a=o.timeout,i=o.onWarn,u="string"==typeof e?_(e):e,l=null,d=null;function f(){var e;n(u),l&&clearTimeout(l),null===(e=d)||void 0===e||e()}a&&(l=setTimeout(f,a));var s=v(u)?u.href.baseVal:u.currentSrc||u.src;if(!s)return f();i("currentSrc",s);var m=function(){var e=r(c().m((function e(){var t;return c().w((function(e){for(;;)switch(e.n){case 0:if(!h(u)||!("decode"in u)){e.n=4;break}return e.p=1,i("img node",u),e.n=2,u.decode();case 2:e.n=4;break;case 3:e.p=3,t=e.v,A({module:"screenshot",category:"loadMedia.onLoad",error:t}),i("Failed to decode image, trying to render anyway",u.dataset.originalSrc||s,t);case 4:f();case 5:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),g=function(e){i("Failed image load",u.dataset.originalSrc||s,e),A({module:"screenshot",category:"loadMedia.onError",error:e}),f()};if(h(u)&&u.complete)return m();d=function(){u.removeEventListener("load",m),u.removeEventListener("error",g)},u.addEventListener("load",m,{once:!0}),u.addEventListener("error",g,{once:!0})}))}function U(e,t){var n=function(e,t,n){var r=S(n).createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttributeNS(null,"width",e.toString()),r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"viewBox","0 0 ".concat(e," ").concat(t)),r}(t.width,t.height,e.ownerDocument),r=n.ownerDocument.createElementNS(n.namespaceURI,"foreignObject");return r.setAttributeNS(null,"x","0%"),r.setAttributeNS(null,"y","0%"),r.setAttributeNS(null,"width","100%"),r.setAttributeNS(null,"height","100%"),r.append(e),n.appendChild(r),n}function V(e){var t=e.log,n=e.node;t.time("clone node");var r=M(n,e);if(t.timeEnd("clone node"),r)return B(r,e),U(r,e)}function G(e,t){return W.apply(this,arguments)}function W(){return(W=r(c().m((function e(t,n){var r,o,a,u,l,d,f,s,m,g,p,y;return c().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,r=D(t,i(i({},n),{},{type:"image/png"})),o=r.log,a=r.quality,u=r.type,o.time("dom to foreignobjectsvg"),l=V(r),o.timeEnd("dom to foreignobjectsvg"),d=N(l),f=_(d,l.ownerDocument),o.time("image to canvas"),s=j(f.ownerDocument,r),!(m=s.getContext&&s.getContext("2d"))){e.n=2;break}return e.n=1,R(f,{timeout:r.timeout,debug:r.debug,onWarn:r.log.warn});case 1:return g=e.v,m.drawImage(g,0,0,s.width,s.height),o.timeEnd("image to canvas"),o.time("canvas to data url"),p=s.toDataURL(u,a),o.timeEnd("dom to domToPng"),e.a(2,p);case 2:return e.a(2,"");case 3:e.n=5;break;case 4:e.p=4,y=e.v,A({module:"screenshot",category:"domToPng",error:y});case 5:return e.a(2)}}),e,null,[[0,4]])})))).apply(this,arguments)}"undefined"!=typeof window&&(window.__webCoreScreenshot=G),e.domToPng=G}({});
